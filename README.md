# Avitotech Pull-Request Reviewer Service

## Запуск сервиса

1. Склонировать репозиторий:

   ```bash
   git clone git@github.com:passwordhash/avitotech-pr-reviewer.git
   ```

2. Перейти в директорию проекта:

   ```bash
   cd avitotech-pr-reviewer
   ```

3. Запустить командой Makefile:

   ```bash
   make up
   ```

   или использовать docker-compose напрямую:

   ```bash
   docker compose \
		--env-file .env.local \
		-p pr-reviewer \
		up -d --build
    ```

4. Сервис будет доступен по адресу: `http://localhost:8080`

## E2E тесты

Инфраструктура для E2E тестов поднимается с помощью docker compose согласно `docker-compose.e2e.yml`. А запуск тестов производится локально на машине разработчика.

Запуск E2E тестов командой Makefile:

```bash
make test-e2e
```

## Допущения

В условии не прописаны некоторые детали, которые я решил уточнить для себя, предполагая, что:

- Пользователь может быть закреплен только к одной команде одновременно.

- При операции добавления пользователя в команду, если пользователь уже состоит в какой-либо команде, он будет автоматически удален из предыдущей команды и добавлен в новую.

- При операции добавления пользователя в команду, если имеется конфликт `user_id` операция будет буде прервана.

- В OpenAPI-спецификации указан AdminToken, однако в описании задания нет требований по авторизации. Поэтому я решил просто хранить токен в сервисе и проверять его при запросах, требующих прав администратора. В реальном проекте стоит использовать JWT или другой механизм авторизации.

- Так как в условии сказано, что сервис должен подниматься одной командой, я решил поместить `.env.local` в репозиторий, который содержит секреты ТОЛЬКО для локального поднятия. В реальном проекте этого делать не стоит.
